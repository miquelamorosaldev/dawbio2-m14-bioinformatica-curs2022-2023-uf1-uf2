"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_assets_modules_github_behaviors_batch-deferred-content_ts-app_assets_modules_github_failb-23a201"],{82664(a,b,c){function d(a){let b=document.querySelectorAll(a);if(b.length>0)return b[b.length-1]}function e(){return`${window.location.protocol}//${window.location.host}${function(){let a=d("meta[name=analytics-location]");return a?a.content:window.location.pathname}()+function(){let a=d("meta[name=analytics-location-query-strip]"),b="";a||(b=window.location.search);let c=d("meta[name=analytics-location-params]");for(let e of(c&&(b+=(b?"&":"?")+c.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let f=e.content.split(":",2);b=b.replace(RegExp(`(^|[?&])${f[0]}($|=)`,"g"),`$1${f[1]}$2`)}return b}()}`}c.d(b,{S:()=>e})},47442(a,b,c){c.d(b,{s:()=>BaseBatchDeferredContentElement});var d=c(76006),e=c(75662);let f=class AutoFlushingQueue{push(a){let b=`item-${this.index++}`;return this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.elements.length>=this.limit&&this.flush(),this.timer=window.setTimeout(()=>{this.timer=null,this.flush()},this.timeout),this.elements.push([a,b]),b}onFlush(a){this.callbacks.push(a)}async flush(){let a=this.elements.splice(0,this.limit);0!==a.length&&await Promise.all(this.callbacks.map(b=>b(a)))}constructor(a=50,b=30){this.elements=[],this.timer=null,this.callbacks=[],this.timeout=a,this.limit=b,this.index=0}};class BatchLoader{loadInBatch(a){let b=this.autoFlushingQueue.push(a);return new Promise(a=>this.callbacks.set(b,a))}async load(a){let b=new Map;for(let[c,d]of a)b.set(d,c);let e=new FormData;for(let[f,g]of(e.set("_method","GET"),b.entries()))for(let h of g.inputs)e.append(`items[${f}][${h.name}]`,h.value);let i=await fetch(this.url,{method:"POST",body:e,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(i.ok){let j=await i.json();if(!j||"object"!=typeof j||Array.isArray(j))throw Error("Malformed batch response");for(let k in j){let l=this.callbacks.get(k);if(l){let m=j[k];this.validate(m),l(m)}}}}constructor(a,b){this.url=a,this.callbacks=new Map,this.autoFlushingQueue=new f,this.autoFlushingQueue.onFlush(async a=>{this.load(a)}),this.validate=b}}var g=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};class BaseBatchDeferredContentElement extends HTMLElement{async connectedCallback(){let a=await this.batchLoader.loadInBatch(this);this.update(a)}get batchLoader(){let a=this.getAttribute("data-url");if(!a)throw Error(`${this.tagName} element requires a data-url attribute`);let b=this.batchLoaders.get(a);return b||(b=new BatchLoader(a,a=>this.validate(a)),this.batchLoaders.set(a,b)),b}}let h=new Map,i=class BatchDeferredContentElement extends BaseBatchDeferredContentElement{validate(a){if("string"!=typeof a)throw Error("Batch deferred content was not a string")}update(a){let b=(0,e.r)(document,a);this.replaceWith(b)}constructor(...a){super(...a),this.batchLoaders=h}};g([d.GO],i.prototype,"inputs",void 0),i=g([d.Ih],i)},86975(a,b,c){c.d(b,{AU:()=>k,Ap:()=>x,DT:()=>p,"G$":()=>j,HN:()=>i,Lq:()=>g,T2:()=>v,Yg:()=>u,ag:()=>t,ck:()=>l,po:()=>s,q3:()=>m,uL:()=>w,wz:()=>o,xc:()=>h,xk:()=>q,zH:()=>f});var d=c(64707);let e="data-turbo-loaded";function f(){document.documentElement.setAttribute(e,"")}function g(){return document.documentElement.hasAttribute(e)}let h=()=>!(0,d.c)("PJAX_ENABLED"),i=a=>a?.tagName==="TURBO-FRAME",j=()=>(0,d.c)("TURBO_EXPERIMENT_RISKY");function k(a,b){let c=a.split("/",3).join("/"),d=b.split("/",3).join("/");return c===d}function l(a,b){let c=a.split("/",2).join("/"),d=b.split("/",2).join("/");return c===d}async function m(){let a=document.head.querySelectorAll("link[rel=stylesheet]"),b=new Set([...document.styleSheets].map(a=>a.href)),c=[];for(let d of a)""===d.href||b.has(d.href)||c.push(n(d));await Promise.all(c)}let n=(a,b=2e3)=>new Promise(c=>{let d=()=>{a.removeEventListener("error",d),a.removeEventListener("load",d),c()};a.addEventListener("load",d,{once:!0}),a.addEventListener("error",d,{once:!0}),setTimeout(d,b)}),o=(a,b)=>{let c=b||a.querySelectorAll("[data-turbo-replace]"),d=[...document.querySelectorAll("[data-turbo-replace]")];for(let e of c){let f=d.find(a=>a.id===e.id);f&&f.replaceWith(e)}},p=a=>{for(let b of a.querySelectorAll("link[rel=stylesheet]"))document.head.querySelector(`link[href="${b.getAttribute("href")}"],
           link[data-href="${b.getAttribute("data-href")}"]`)||document.head.append(b)},q=a=>{for(let b of a.querySelectorAll("script"))document.head.querySelector(`script[src="${b.getAttribute("src")}"]`)||r(b)},r=a=>{let{src:b}=a;if(!b)return;let c=document.createElement("script"),d=a.getAttribute("type");d&&(c.type=d),c.src=b,document.head&&document.head.appendChild(c)},s=a=>{let b=[];for(let c of a.querySelectorAll('meta[data-turbo-track="reload"]'))document.querySelector(`meta[http-equiv="${c.getAttribute("http-equiv")}"]`)?.content!==c.content&&b.push(v(c.getAttribute("http-equiv")));return b},t=a=>{let b=a.querySelector("[data-turbo-head]")||a.head;return{title:b.querySelector("title")?.textContent,transients:[...b.querySelectorAll("[data-turbo-transient]")].map(a=>a.cloneNode(!0)),bodyClasses:a.querySelector("meta[name=turbo-body-classes]")?.content,replacedElements:[...a.querySelectorAll("[data-turbo-replace]")].map(a=>a.cloneNode(!0))}},u=()=>[...document.documentElement.attributes],v=a=>a.replace(/^x-/,"").replaceAll("-","_"),w=a=>document.dispatchEvent(new CustomEvent("turbo:reload",{detail:{reason:a}})),x=(a,b)=>{for(let c of a.attributes)b.hasAttribute(c.nodeName)||"aria-busy"===c.nodeName||a.removeAttribute(c.nodeName);for(let d of b.attributes)a.getAttribute(d.nodeName)!==d.nodeValue&&a.setAttribute(d.nodeName,d.nodeValue)}},25019(a,b,c){c.d(b,{aJ:()=>t,cI:()=>q,eK:()=>m});var d=c(82918),e=c(45341),f=c(28382),g=c(82664),h=c(86975),i=c(58843);let j=!1,k=0,l=Date.now();function m(a,b={}){var c;"AbortError"!==(c=a).name&&("TypeError"!==c.name||"Failed to fetch"!==c.message)&&n(p(o(a),b))}async function n(a){if(!v())return;let b=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(b){if(s(a.error.stacktrace)){j=!0;return}k++;try{await fetch(b,{method:"post",body:JSON.stringify(a)})}catch{}}}function o(a){return{type:a.name,value:a.message,stacktrace:q(a)}}function p(a,b={}){return Object.assign({error:a,sanitizedUrl:(0,g.S)()||window.location.href,readyState:document.readyState,referrer:(0,i.wP)(),timeSinceLoad:Math.round(Date.now()-l),user:t()||void 0,turbo:(0,h.xc)(),ui:Boolean(document.querySelector('meta[name="ui"]'))},b)}function q(a){return(0,f.Q)(a.stack||"").map(a=>({filename:a.file||"",function:String(a.methodName),lineno:(a.lineNumber||0).toString(),colno:(a.column||0).toString()}))}let r=/(chrome|moz|safari)-extension:\/\//;function s(a){return a.some(a=>r.test(a.filename)||r.test(a.function))}function t(){let a=document.head?.querySelector('meta[name="user-login"]')?.content;if(a)return a;let b=(0,d.b)();return`anonymous-${b}`}let u=!1;function v(){return!u&&!j&&k<10&&(0,e.Gb)()}if(window.addEventListener("pageshow",()=>u=!1),window.addEventListener("pagehide",()=>u=!0),"function"==typeof BroadcastChannel){let w=new BroadcastChannel("shared-worker-error");w.addEventListener("message",a=>{m(a.data.error)})}},64707(a,b,c){c.d(b,{"$":()=>g,c:()=>f});var d=c(15205);let e=(0,d.Z)(function(){return(document.head?.querySelector('meta[name="enabled-features"]')?.content||"").split(",")}),f=(0,d.Z)(function(a){return -1!==e().indexOf(a)}),g={isFeatureEnabled:f}},86702(a,b,c){c.d(b,{Z:()=>g,"_":()=>h});var d=c(16462),e=c(34855);let f=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function g(a,b={throwQuotaErrorsOnSet:!1},c=d.iG,g=a=>a,h=a=>a){let i;try{if(!c)throw Error();i=c[a]||new f}catch{i=new f}let{throwQuotaErrorsOnSet:j}=b;function k(a){b.sendCacheStats&&(0,e.b)({incrementKey:a})}function l(a){try{if(i.removeItem(a),b.ttl){let c=`${a}:expiry`;i.removeItem(c)}}catch(d){}}return{getItem:function(a,b=new Date().getTime()){try{let c=i.getItem(a);if(!c)return null;let d=`${a}:expiry`,e=Number(i.getItem(d));if(e&&b>e)return l(a),l(d),k("SAFE_STORAGE_VALUE_EXPIRED"),null;return k("SAFE_STORAGE_VALUE_WITHIN_TTL"),g(c)}catch(f){return null}},setItem:function(a,c,d=new Date().getTime()){try{if(i.setItem(a,h(c)),b.ttl){let e=`${a}:expiry`,f=d+b.ttl;i.setItem(e,f.toString())}}catch(g){if(j&&g.message.toLowerCase().includes("quota"))throw g}},removeItem:l,clear:i.clear,key:i.key,get length(){return i.length}}}function h(a){return g(a,{throwQuotaErrorsOnSet:!1},window,JSON.parse,JSON.stringify)}},34855(a,b,c){c.d(b,{B:()=>l,b:()=>g});var d=c(16462),e=c(80721);let f=[];function g(a,b=!1){void 0===a.timestamp&&(a.timestamp=new Date().getTime()),a.loggedIn=k(),a.staff=l(),f.push(a),b?j():i()}let h=null;async function i(){await e.C,null==h&&(h=window.requestIdleCallback(j))}function j(){if(h=null,!f.length)return;let a=d.n4?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(!a)return;let b=JSON.stringify({stats:f});try{navigator.sendBeacon&&navigator.sendBeacon(a,b)}catch{}f=[]}function k(){return!!d.n4?.head?.querySelector('meta[name="user-login"]')?.content}function l(){return!!d.n4?.head?.querySelector('meta[name="user-staff"]')?.content}d.n4?.addEventListener("pagehide",j),d.n4?.addEventListener("visibilitychange",j)}}])
//# sourceMappingURL=app_assets_modules_github_behaviors_batch-deferred-content_ts-app_assets_modules_github_failb-23a201-c893f55367df.js.map